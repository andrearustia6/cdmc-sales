@{
    ViewBag.Title = "员工进度";
}
@using Entity
@using Utl
@using Model
@model List<Project>
@Html.Partial("contenttitle", "员工进度")
@Html.Partial("durationselector")
@{
    
    var startdate = ViewBag.StartDate as DateTime?;
    var enddate = ViewBag.EndDate as DateTime?;
     foreach(var p in Model)
     {
          var lists = new List<ViewMemberProgressAmount>();
           p.Members.ForEach(m =>
                {
                    var vm = m.GetMemberProgress(startdate, enddate);
                    lists.Add(vm);
                });
        
      @(Html.Telerik().Chart(lists).Name("chart" + p.ID).Title(p.Name).Legend(legend => legend.Position(ChartLegendPosition.Top)).Series(series =>
      {
          series.Bar(s => s.DealInTarget).Name("目标").Labels(true);
          series.Bar(s => s.DealIn).Name("出单").Labels(labels => labels.Position(ChartBarLabelsPosition.OutsideEnd)
          .Visible(true));
      }).CategoryAxis(axis => axis.Categories(s => s.Member.Name)).ValueAxis(axis => axis.Numeric().Labels(labels => labels.Format("${0:#,##0}")))
                .HtmlAttributes(new { style = "width: 670px;" }))
         
     }      
     });  
     
 }


