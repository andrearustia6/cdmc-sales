@{
    ViewBag.Title = "LeadCalls";
}
@using Entity;
@using Utl
@model List<Project>
<br />
@Html.Partial("durationselector")

   <ul >
   <li >
    @foreach(var p in Model)
    {
       <br />
       <b><span>项目名称：@p.Name</span></b>
        @(Html.Telerik().Grid(p.GetProjectMemberLeadCalls((DateTime?)ViewBag.StartDate,(DateTime?)ViewBag.EndDate) ).Name("project"+p.ID).DataKeys(keys =>
                {
                   keys.Add(s => s.Member.ID);
                }).Columns(c=>{
                    c.Bound(item => item.Member.Name).Width(60).FooterTemplate(@<text>总数：</text>);
                    c.Bound(item => item.Others).Width(60).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Blowed).Width(65).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Not_Pitched).Width(100).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Pitched).Width(70).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Full_Pitched).Width(100).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Call_Backed).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Waiting_For_Approval).Width(155).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Qualified_Decision).Width(135).Aggregate(item => item.Sum()).FooterTemplate(@<text>@item.Sum</text>);
                    c.Bound(item => item.Closed).Width(70).Aggregate(item => item.Sum());
                }).Resizable(resizing => resizing.Columns(true))
                  .Filterable().Sortable().Groupable()
                  .Scrollable(scrolling => scrolling.Height(150)))
    }
    </li>
    </ul>